<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø·Ø¹Ù… | Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f7f6; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .container { background: white; padding: 2rem; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); width: 90%; max-width: 450px; text-align: center; }
        h1 { color: #333; font-size: 1.5rem; margin-bottom: 1.5rem; }
        .upload-area { border: 2px dashed #3498db; padding: 20px; border-radius: 8px; margin-bottom: 20px; transition: 0.3s; }
        .upload-area:hover { border-color: #2ecc71; background-color: #f9fdfb; }
        input[type="file"] { margin: 10px 0; width: 100%; }
        button { background-color: #3498db; color: white; border: none; padding: 12px 20px; border-radius: 6px; cursor: pointer; font-size: 1rem; width: 100%; transition: 0.3s; }
        button:hover { background-color: #2980b9; }
        #status { margin-top: 15px; font-weight: bold; color: #555; }
        #preview { margin-top: 20px; max-width: 100%; border-radius: 8px; display: none; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .url-box { margin-top: 15px; background: #eee; padding: 10px; font-size: 0.8rem; word-break: break-all; border-radius: 4px; display: none; }
    </style>
</head>
<body>

<div class="container">
    <h1>ğŸ“¸ Ø¥Ø¶Ø§ÙØ© ØµÙˆØ± Ù„Ù„Ù…Ù†ÙŠÙˆ</h1>
    
    <div class="upload-area">
        <input type="file" id="imageInput" accept="image/*">
    </div>

    <button onclick="uploadToCloudinary()">Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø¢Ù†</button>

    <p id="status">Ø¬Ø§Ù‡Ø² Ù„Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ØµÙˆØ±Ø©...</p>
    
    <div id="urlContainer" class="url-box"></div>
    <img id="preview" src="" alt="Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„ØµÙˆØ±Ø©">
</div>

<script>
    // Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ
    const cloudName = "dzrrirfig"; 
    const uploadPreset = "restaurant_preset"; // ØªØ£ÙƒØ¯ Ø£Ù†Ùƒ Ø£Ù†Ø´Ø£ØªÙ‡ ÙƒÙ€ Unsigned ÙÙŠ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Cloudinary

    async function uploadToCloudinary() {
        const fileInput = document.getElementById('imageInput');
        const status = document.getElementById('status');
        const preview = document.getElementById('preview');
        const urlBox = document.getElementById('urlContainer');

        // Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù
        if (!fileInput.files[0]) {
            alert("Ù…Ù† ÙØ¶Ù„Ùƒ Ø§Ø®ØªØ± ØµÙˆØ±Ø© Ø£ÙˆÙ„Ø§Ù‹ Ù…Ù† Ø¬Ù‡Ø§Ø²Ùƒ");
            return;
        }

        const file = fileInput.files[0];
        const formData = new FormData();
        formData.append('file', file);
        formData.append('upload_preset', uploadPreset);

        status.innerText = "â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø±ÙØ¹ Ø¥Ù„Ù‰ Ø§Ù„Ø³Ø­Ø§Ø¨Ø©...";
        status.style.color = "#f39c12";

        try {
            const response = await fetch(`https://api.cloudinary.com/v1_1/${cloudName}/image/upload`, {
                method: 'POST',
                body: formData
            });

            const data = await response.json();

            if (data.secure_url) {
                status.innerText = "âœ… ØªÙ… Ø§Ù„Ø±ÙØ¹ Ø¨Ù†Ø¬Ø§Ø­!";
                status.style.color = "#27ae60";

                // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© ÙˆØ§Ù„Ø±Ø§Ø¨Ø·
                preview.src = data.secure_url;
                preview.style.display = "inline-block";
                
                urlBox.innerText = "Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø© Ù„Ù„Ù…Ù†ÙŠÙˆ: " + data.secure_url;
                urlBox.style.display = "block";

                console.log("Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…Ø¨Ø§Ø´Ø±:", data.secure_url);
            } else {
                status.innerText = "âŒ ÙØ´Ù„ Ø§Ù„Ø±ÙØ¹: " + (data.error ? data.error.message : "Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹");
                status.style.color = "#e74c3c";
                console.error("Cloudinary Error:", data);
            }
        } catch (error) {
            status.innerText = "âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª";
            status.style.color = "#e74c3c";
            console.error("Fetch Error:", error);
        }
    }
</script>

</body>
</html>
